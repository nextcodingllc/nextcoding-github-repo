<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NextCoding provides expert IT support, custom software development, and web solutions for businesses. Enterprise-grade technology services.">
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    
    <title>NextCoding | IT Support & Software Development</title>
    
    <!-- Critical CSS (inline for above-the-fold content) -->
    <style>
        /* Critical minimal styles */
        html { scroll-behavior: smooth; }
        body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }
        
        /* Skeleton loader for images */
        .img-loading { background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
        @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
        }
    </style>
    
    <!-- Async load non-critical CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" media="print" onload="this.media='all'">
    
    <!-- Lazy load JS -->
    <script>
        // Load non-critical resources
        function loadResources() {
            const resources = [
                { tag: 'script', src: 'https://cdn.tailwindcss.com', async: true },
                { tag: 'script', src: 'https://unpkg.com/lucide@latest', async: true },
                { tag: 'script', src: 'https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js', async: true },
                { tag: 'script', src: 'https://cdn.jsdelivr.net/npm/sweetalert2@11', async: true }
            ];
            
            resources.forEach(res => {
                const el = document.createElement(res.tag);
                el.src = res.src;
                if (res.async) el.async = true;
                if (res.defer) el.defer = true;
                document.head.appendChild(el);
            });
        }
        
        // Execute when idle
        if ('requestIdleCallback' in window) {
            requestIdleCallback(() => loadResources());
        } else {
            setTimeout(loadResources, 1000);
        }
    </script>
</head>
<body class="font-sans text-gray-600 antialiased bg-gray-50 overflow-x-hidden">

    <!-- SPLASH SCREEN (Optimized) -->
    <div id="splash-screen" aria-live="assertive" aria-label="Loading NextCoding" class="fixed inset-0 z-[100] bg-white flex items-center justify-center">
        <div class="wave-container z-20" aria-hidden="true">
            <div class="splash-logo-container">
                <img src="https://www.nextcoding.com/images/logo.png" 
                     width="120" height="48"
                     class="h-12 md:h-24 w-auto object-contain animate-logo-enter brightness-0 invert" 
                     alt="NextCoding"
                     loading="eager"
                     onload="this.classList.remove('img-loading')">
            </div>
        </div>
    </div>

    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-brand-600 text-white p-2 rounded z-[9999]">
        Skip to main content
    </a>

    <!-- NAVBAR (Improved Accessibility) -->
    <nav class="fixed w-full z-50 bg-gray-900 shadow-md border-b border-gray-800 transition-all duration-300" id="navbar" role="navigation" aria-label="Main">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <a href="#inicio" class="flex-shrink-0 flex items-center gap-3 focus:outline-none focus:ring-2 focus:ring-brand-500 rounded">
                    <img id="nav-logo" src="https://www.nextcoding.com/images/logo.png" 
                         width="120" height="40"
                         alt="NextCoding Logo" 
                         class="h-8 md:h-10 w-auto object-contain brightness-0 invert"
                         loading="eager"
                         onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 150 50%22><text x=%2275%22 y=%2225%22 font-family=%22system-ui%22 font-size=%2214%22 fill=%22white%22 text-anchor=%22middle%22>NextCoding</text></svg>'">
                </a>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-6 items-center" role="menubar">
                    <a href="#inicio" class="text-gray-300 hover:text-white font-medium transition focus:outline-none focus:ring-2 focus:ring-brand-500 rounded px-2 py-1" role="menuitem">Home</a>
                    <a href="#software" class="text-gray-300 hover:text-white font-medium transition focus:outline-none focus:ring-2 focus:ring-brand-500 rounded px-2 py-1" role="menuitem">Software Dev</a>
                    <a href="#soporte" class="text-gray-300 hover:text-white font-medium transition focus:outline-none focus:ring-2 focus:ring-brand-500 rounded px-2 py-1" role="menuitem">IT Support</a>
                    
                    <button onclick="toggleLanguage()" 
                            class="flex items-center gap-1 px-3 py-1 rounded-full border border-gray-700 text-gray-300 hover:text-white text-sm font-semibold hover:bg-gray-800 transition focus:outline-none focus:ring-2 focus:ring-brand-500"
                            aria-label="Toggle language"
                            role="switch"
                            aria-checked="false">
                        <i data-lucide="globe" class="w-4 h-4" aria-hidden="true"></i>
                        <span id="lang-display">EN</span>
                    </button>
                    
                    <button onclick="openSupportModal()" 
                            class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition shadow-lg shadow-red-600/30 flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                            aria-label="Quick remote support">
                        <i data-lucide="monitor-check" class="w-4 h-4" aria-hidden="true"></i>
                        <span data-i18n="nav_quick_support">Quick Support</span>
                    </button>
                    
                    <a href="#contacto" 
                       class="bg-brand-600 text-white px-5 py-2 rounded-lg font-medium hover:bg-brand-700 transition shadow-lg shadow-brand-500/30 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-brand-500"
                       data-i18n="nav_contact">Contact Us</a>
                </div>
                
                <!-- Mobile Menu -->
                <div class="md:hidden flex items-center gap-4">
                    <button onclick="toggleLanguage()" 
                            class="flex items-center gap-1 px-2 py-1 rounded-full border border-gray-700 text-gray-300 text-xs font-bold focus:outline-none focus:ring-2 focus:ring-brand-500"
                            aria-label="Toggle language">
                        <span id="lang-display-mobile">EN</span>
                    </button>
                    
                    <button id="mobile-menu-btn" 
                            class="text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-brand-500 p-1 rounded"
                            aria-label="Toggle menu"
                            aria-expanded="false"
                            aria-controls="mobile-menu">
                        <i data-lucide="menu" class="h-6 w-6" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu Panel -->
        <div id="mobile-menu" 
             class="hidden md:hidden bg-gray-900 border-t border-gray-800 absolute w-full shadow-xl"
             role="menu"
             aria-labelledby="mobile-menu-btn">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#inicio" class="block px-3 py-2 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-brand-500" role="menuitem">Home</a>
                <a href="#software" class="block px-3 py-2 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-brand-500" role="menuitem">Software Dev</a>
                <a href="#soporte" class="block px-3 py-2 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-brand-500" role="menuitem">IT Support</a>
                
                <button onclick="openSupportModal()" 
                        class="w-full text-left px-3 py-2 text-red-500 font-bold hover:bg-gray-800 rounded-md flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                        role="menuitem">
                    <i data-lucide="monitor-check" class="w-4 h-4" aria-hidden="true"></i>
                    <span data-i18n="nav_quick_support">Quick Support</span>
                </button>
                
                <a href="#contacto" 
                   class="block px-3 py-2 text-brand-500 font-bold hover:bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500"
                   role="menuitem">Contact Us</a>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main id="main-content">
        <!-- HERO SECTION (Improved semantics) -->
        <section id="inicio" class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden bg-circuit-pattern text-white" aria-labelledby="hero-title">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <header class="text-center max-w-4xl mx-auto">
                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gray-800/80 border border-gray-700 text-brand-200 text-sm font-medium mb-6 reveal backdrop-blur-sm">
                        <span class="relative flex h-2 w-2">
                          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"></span>
                          <span class="relative inline-flex rounded-full h-2 w-2 bg-brand-500"></span>
                        </span>
                        <span data-i18n="hero_badge">Technological Innovation for Business</span>
                    </div>
                    
                    <h1 id="hero-title" class="text-4xl md:text-6xl lg:text-7xl font-extrabold tracking-tight mb-6 leading-tight reveal delay-100">
                        <span data-i18n="hero_title_prefix">Your Strategic Partner in</span> <br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-white via-brand-200 to-accent-400 drop-shadow-sm" data-i18n="hero_title_highlight">IT & Development</span>
                    </h1>
                    
                    <p class="text-lg md:text-xl text-gray-300 mb-10 max-w-2xl mx-auto reveal delay-200 leading-relaxed" data-i18n="hero_desc">
                        We boost your business with high-performance custom software and comprehensive technical support. Technology that works, scales, and secures your operation.
                    </p>
                    
                    <div class="flex flex-col sm:flex-row gap-4 justify-center reveal delay-300">
                        <button onclick="openSupportModal()" 
                                class="group inline-flex justify-center items-center px-8 py-4 border border-transparent text-base font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 transition shadow-lg shadow-red-500/25 relative overflow-hidden focus:outline-none focus:ring-2 focus:ring-brand-500">
                            <i data-lucide="life-buoy" class="w-5 h-5 mr-2 group-hover:rotate-12 transition-transform" aria-hidden="true"></i>
                            <span class="relative" data-i18n="hero_cta_support">Get Remote Support</span>
                        </button>
                        
                        <a href="#contacto" 
                           class="inline-flex justify-center items-center px-8 py-4 border border-gray-600 text-base font-medium rounded-lg text-gray-200 hover:bg-white/10 hover:border-white transition backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-brand-500">
                            <span data-i18n="hero_cta_talk">Talk to an Expert</span>
                            <i data-lucide="arrow-right" class="w-5 h-5 ml-2" aria-hidden="true"></i>
                        </a>
                    </div>
                </header>
            </div>
        </section>

        <!-- Rest of your sections remain similar but with improved semantics -->
        <!-- ... -->

    </main>

    <!-- FOOTER (Missing in original) -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <img src="https://www.nextcoding.com/images/logo.png" 
                         alt="NextCoding" 
                         class="h-10 w-auto brightness-0 invert mb-4">
                    <p class="text-gray-400">Technology solutions for business growth.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Services</h3>
                    <ul class="space-y-2">
                        <li><a href="#software" class="text-gray-400 hover:text-white transition">Software Development</a></li>
                        <li><a href="#soporte" class="text-gray-400 hover:text-white transition">IT Support</a></li>
                        <li><a href="#web" class="text-gray-400 hover:text-white transition">Web Development</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact</h3>
                    <p class="text-gray-400">info@nextcoding.com</p>
                    <p class="text-gray-400 text-sm mt-2">&copy; 2024 NextCoding. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- MODALS & OTHER ELEMENTS remain similar... -->
    <!-- ... -->

    <!-- MODERNIZED SCRIPT (Modular, better error handling) -->
    <script>
        // Configuration
        const CONFIG = {
            emailjs: {
                serviceId: 'service_ozqopai',
                templateId: 'template_dn4b4oe',
                publicKey: 'l5-ahwZ7x9T1LmrMG'
            },
            translations: {
                es: { /* Spanish translations */ },
                en: { /* English translations */ }
            },
            support: {
                validCodes: ['dGFrZWNvbnRyb2wwMjM1', 'MTIz'],
                phone: '15551234567'
            }
        };

        // State management
        const AppState = {
            currentLang: 'en',
            isFocusMode: false,
            splashShown: false
        };

        // Core utilities
        const Utils = {
            debounce(fn, delay = 250) {
                let timeout;
                return (...args) => {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => fn(...args), delay);
                };
            },

            throttle(fn, limit = 250) {
                let inThrottle;
                return (...args) => {
                    if (!inThrottle) {
                        fn(...args);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                };
            },

            setCookie(name, value, days = 365) {
                const expires = new Date(Date.now() + days * 864e5).toUTCString();
                document.cookie = `${name}=${value}; expires=${expires}; path=/; Secure; SameSite=Strict`;
            },

            getCookie(name) {
                return document.cookie.split('; ').find(row => row.startsWith(name))?.split('=')[1];
            }
        };

        // Animation controller
        const AnimationController = {
            observer: null,
            
            init() {
                if ('IntersectionObserver' in window) {
                    this.observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.classList.add('active');
                                this.observer.unobserve(entry.target);
                            }
                        });
                    }, { threshold: 0.1, rootMargin: '50px' });
                    
                    document.querySelectorAll('.reveal').forEach(el => this.observer.observe(el));
                }
            }
        };

        // Language manager
        const LanguageManager = {
            async setLanguage(lang) {
                AppState.currentLang = lang;
                await this.updateContent();
                this.updateLangDisplay();
                Utils.setCookie('preferred_lang', lang);
            },

            async updateContent() {
                const trans = CONFIG.translations[AppState.currentLang];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.dataset.i18n;
                    if (trans[key]) {
                        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                            el.placeholder = trans[key];
                        } else {
                            el.textContent = trans[key];
                        }
                    }
                });
            },

            updateLangDisplay() {
                document.getElementById('lang-display').textContent = AppState.currentLang.toUpperCase();
                document.getElementById('lang-display-mobile').textContent = AppState.currentLang.toUpperCase();
            }
        };

        // Form handler
        const FormHandler = {
            async submitContactForm(formData) {
                try {
                    const response = await emailjs.send(
                        CONFIG.emailjs.serviceId,
                        CONFIG.emailjs.templateId,
                        formData,
                        CONFIG.emailjs.publicKey
                    );
                    
                    return { success: true, data: response };
                } catch (error) {
                    console.error('Form submission error:', error);
                    return { success: false, error };
                }
            },

            validateForm(form) {
                const errors = [];
                const name = form.querySelector('[name="from_name"]');
                const email = form.querySelector('[name="reply_to"]');
                
                if (!name.value.trim()) errors.push('Name is required');
                if (!email.value.trim() || !this.isValidEmail(email.value)) errors.push('Valid email is required');
                
                return { isValid: errors.length === 0, errors };
            },

            isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }
        };

        // Lazy loading images
        const LazyLoader = {
            observer: null,
            
            init() {
                if ('IntersectionObserver' in window) {
                    this.observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                this.loadImage(img);
                                this.observer.unobserve(img);
                            }
                        });
                    }, { rootMargin: '50px' });
                    
                    document.querySelectorAll('img[data-src]').forEach(img => this.observer.observe(img));
                }
            },
            
            loadImage(img) {
                const src = img.dataset.src;
                if (!src) return;
                
                const image = new Image();
                image.src = src;
                image.onload = () => {
                    img.src = src;
                    img.classList.remove('img-loading');
                };
                image.onerror = () => {
                    console.warn(`Failed to load image: ${src}`);
                    img.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23f0f0f0"/><text x="50" y="50" font-family="system-ui" font-size="10" text-anchor="middle" fill="%23999">Image</text></svg>';
                };
            }
        };

        // Main initialization
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize components
            AnimationController.init();
            LazyLoader.init();
            
            // Set initial language from cookie
            const savedLang = Utils.getCookie('preferred_lang') || 'en';
            LanguageManager.setLanguage(savedLang);
            
            // Initialize EmailJS
            if (typeof emailjs !== 'undefined') {
                emailjs.init(CONFIG.emailjs.publicKey);
            }
            
            // Add event listeners
            this.setupEventListeners();
        });

        // Global functions for HTML onclick attributes
        window.toggleLanguage = () => {
            const newLang = AppState.currentLang === 'es' ? 'en' : 'es';
            LanguageManager.setLanguage(newLang);
        };

        window.openSupportModal = () => {
            // Modal opening logic
        };

        // Error handling
        window.addEventListener('error', (e) => {
            console.error('Global error:', e.error);
            // Send to analytics
            if (window.ga) {
                ga('send', 'exception', {
                    exDescription: e.message,
                    exFatal: false
                });
            }
        });

        // Performance monitoring
        if ('PerformanceObserver' in window) {
            const perfObserver = new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    console.log(`[Perf] ${entry.name}: ${entry.duration.toFixed(2)}ms`);
                }
            });
            perfObserver.observe({ entryTypes: ['largest-contentful-paint', 'first-input'] });
        }
    </script>
    
    <!-- Non-critical CSS loaded last -->
    <link rel="stylesheet" href="styles.css" media="print" onload="this.media='all'">
</body>
</html>